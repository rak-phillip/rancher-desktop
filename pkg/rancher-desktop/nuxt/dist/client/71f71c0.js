(window.webpackJsonp=window.webpackJsonp||[]).push([[21,62],{1020:function(e,t,r){"use strict";r(970)},1021:function(e,t,r){var n=r(66)(!1);n.push([e.i,".content[data-v-dc00c440]{padding:20px}",""]),e.exports=n},1022:function(e,t,r){"use strict";var n=r(930),o=r.n(n);t.default=o.a},1087:function(e,t,r){"use strict";r.r(t);r(434),r(9),r(435),r(25),r(436),r(60);var n=r(0),o=r(751),c=r(74),d=r(20),l=n.default.extend({components:{PortForwarding:o.default},data:function(){return{state:d.a.sendSync("k8s-state"),settings:c.i,services:[],errorMessage:null,serviceBeingEdited:null}},watch:{services:function(e){var t=this;if(this.serviceBeingEdited){var r=e.find((function(e){return t.compareServices(t.serviceBeingEdited,e)}));r&&(this.serviceBeingEdited=Object.assign(this.serviceBeingEdited,{listenPort:r.listenPort}))}}},mounted:function(){var e=this;this.$store.dispatch("page/setHeader",{title:this.t("portForwarding.title")}),d.a.on("k8s-check-state",(function(t,r){e.$data.state=r})),d.a.on("service-changed",(function(t,r){e.$data.services=r})),d.a.on("service-error",(function(t,r,n){d.a.invoke("service-forward",r,!1),e.$data.errorMessage=n})),d.a.invoke("service-fetch").then((function(t){e.$data.services=t})),d.a.on("settings-update",(function(t,r){e.$data.settings=r})),d.a.on("settings-read",(function(t,r){e.$data.settings=r})),d.a.send("settings-read")},methods:{handleUpdatePort:function(e){this.serviceBeingEdited&&(this.serviceBeingEdited.listenPort=e)},onIncludeK8sServicesChanged:function(e){e!==this.settings.portForwarding.includeKubernetesServices&&d.a.invoke("settings-write",{portForwarding:{includeKubernetesServices:e}})},compareServices:function(e,t){return e.name===t.name&&e.namespace===t.namespace&&e.port===t.port},findServiceMatching:function(e,t){if(e){return t.find((function(t){return n=e,(r=t).name===n.name&&r.namespace===n.namespace&&r.port===n.port;var r,n}))}},handleEditPortForward:function(e){this.errorMessage=null,this.serviceBeingEdited&&d.a.invoke("service-forward",this.serviceBeingEdited,!1),this.serviceBeingEdited=Object.assign({},e),d.a.invoke("service-forward",e,!0)},handleCancelEditPortForward:function(e){this.errorMessage=null,d.a.invoke("service-forward",e,!1),this.serviceBeingEdited=null},handleCancelPortForward:function(e){this.errorMessage=null,d.a.invoke("service-forward",e,!1)},handleUpdatePortForward:function(){this.errorMessage=null,this.serviceBeingEdited&&d.a.invoke("service-forward",this.serviceBeingEdited,!0),this.serviceBeingEdited=null},handleCloseError:function(){this.errorMessage=null}}}),f=l,v=(r(1020),r(24)),m=r(1022),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("PortForwarding",{staticClass:"content",attrs:{services:e.services,"include-kubernetes-services":e.settings.portForwarding.includeKubernetesServices,"k8s-state":e.state,"kubernetes-is-disabled":!e.settings.kubernetes.enabled,"service-being-edited":e.serviceBeingEdited,"error-message":e.errorMessage},on:{updatePort:e.handleUpdatePort,toggledServiceFilter:e.onIncludeK8sServicesChanged,editPortForward:e.handleEditPortForward,cancelPortForward:e.handleCancelPortForward,cancelEditPortForward:e.handleCancelEditPortForward,updatePortForward:e.handleUpdatePortForward,closeError:e.handleCloseError}})}),[],!1,null,"dc00c440",null);"function"==typeof m.default&&Object(m.default)(component);t.default=component.exports},751:function(e,t,r){"use strict";r.r(t);r(37),r(9),r(40),r(25),r(41),r(60),r(50),r(51),r(52),r(56),r(22);var n=r(304),o=r(0),c=r(828),d=r(722),l=o.default.extend({components:{SortableTable:d.default,Checkbox:n.Checkbox,Banner:n.Banner},directives:{focus:{inserted:function(element){element.focus()}}},props:{services:{type:Array,required:!0},includeKubernetesServices:{type:Boolean,default:!1},k8sState:{type:String,default:c.a.STOPPED},kubernetesIsDisabled:{type:Boolean,default:!1},serviceBeingEdited:{type:Object,default:null},errorMessage:{type:String,default:null}},data:function(){return{headers:[{name:"namespace",label:"Namespace",sort:["namespace","name"]},{name:"name",label:"Name",sort:["name","namespace"]},{name:"portName",label:"Port",sort:["portName","namespace","name"]},{name:"listenPort",label:"Local Port",sort:["listenPort","namespace","name"]}]}},computed:{isRunning:function(){return this.k8sState===c.a.STARTED},rows:function(){var e=this.services;return this.includeKubernetesServices||(e=e.filter((function(e){return"kube-system"!==e.namespace})).filter((function(e){return!("default"===e.namespace&&"kubernetes"===e.name)}))),e.map((function(e){var t,r="number"==typeof e.port?e.port.toString():e.port;return{namespace:e.namespace,name:e.name,portName:null!==(t=e.portName)&&void 0!==t?t:r,port:e.port,listenPort:e.listenPort,key:"".concat(e.namespace,"/").concat(e.name,":").concat(e.portName)}}))}},methods:{serviceBeingEditedIs:function(e){return null!==this.serviceBeingEdited&&(this.serviceBeingEdited.name===e.name&&this.serviceBeingEdited.namespace===e.namespace&&this.serviceBeingEdited.port===e.port)},emitUpdatePort:function(e){var t=parseInt(e.target.value,10);this.$emit("updatePort",t)},handleCheckbox:function(e){this.$emit("toggledServiceFilter",e)},emitEditPortForward:function(e){this.$emit("editPortForward",e)},emitCancelPortForward:function(e){this.$emit("cancelPortForward",e)},emitCancelEditPortForward:function(e){this.$emit("cancelEditPortForward",e)},emitUpdatePortForward:function(){this.$emit("updatePortForward")},emitCloseError:function(){this.$emit("closeError")}}}),f=(r(928),r(24)),component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.errorMessage?r("Banner",{staticClass:"banner",attrs:{color:"error",closable:!0},on:{close:e.emitCloseError}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),e._v(" "),r("SortableTable",{attrs:{headers:e.headers,rows:e.rows,"key-field":"key","default-sort-by":"namespace","table-actions":!1,paging:!0,"row-actions-width":parseInt(95,10)},scopedSlots:e._u([{key:"header-middle",fn:function(){return[r("div",{staticClass:"header-middle"},[r("Checkbox",{staticClass:"kubernetes-services",attrs:{label:"Include Kubernetes services",value:e.includeKubernetesServices,disabled:!e.isRunning||e.kubernetesIsDisabled},on:{input:e.handleCheckbox}})],1)]},proxy:!0},{key:"col:listenPort",fn:function(t){var n=t.row;return[e.serviceBeingEditedIs(n)?r("div",{staticClass:"listen-port-div"},[r("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"listen-port-input",attrs:{type:"number"},domProps:{value:e.serviceBeingEdited.listenPort},on:{input:e.emitUpdatePort,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitUpdatePortForward.apply(null,arguments)}}})]):r("div",[r("p",{staticClass:"listen-port-p"},[e._v("\n          "+e._s(n.listenPort)+"\n        ")])])]}},{key:"row-actions",fn:function(t){var n=t.row;return[void 0!==n.row.listenPort||e.serviceBeingEditedIs(n.row)?e.serviceBeingEditedIs(n.row)?r("div",{staticClass:"action-div"},[r("button",{staticClass:"btn btn-sm role-tertiary btn-icon",on:{click:function(t){return e.emitCancelEditPortForward(n.row)}}},[r("span",{staticClass:"icon icon-x icon-lg"})]),e._v(" "),r("button",{staticClass:"btn btn-sm role-tertiary btn-icon",on:{click:function(t){return e.emitUpdatePortForward()}}},[r("span",{staticClass:"icon icon-checkmark icon-lg"})])]):r("div",{staticClass:"action-div"},[r("button",{staticClass:"btn btn-sm role-tertiary",on:{click:function(t){return e.emitCancelPortForward(n.row)}}},[e._v("\n          Cancel\n        ")])]):r("div",{staticClass:"action-div"},[r("button",{staticClass:"btn btn-sm role-tertiary",on:{click:function(t){return e.emitEditPortForward(n.row)}}},[e._v("\n          Forward\n        ")])])]}}])})],1)}),[],!1,null,null,null);t.default=component.exports},828:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(9),r(171),r(238);var n,o=r(35),c=r(34),d=r(124),l=r(125),f=r(62),v=r(314);r(60),r(53);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}!function(e){e.STOPPED="STOPPED",e.STARTING="STARTING",e.STARTED="STARTED",e.STOPPING="STOPPING",e.ERROR="ERROR",e.DISABLED="DISABLED"}(n||(n={}));Error},872:function(e,t,r){var content=r(929);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(67).default)("cbee5732",content,!0,{sourceMap:!1})},928:function(e,t,r){"use strict";r(872)},929:function(e,t,r){var n=r(66)(!1);n.push([e.i,".btn-icon{display:flex;flex-direction:row;justify-content:center;align-items:center}.action-div{display:flex;flex-direction:row-reverse;grid-gap:.5rem;gap:.5rem}.listen-port-div{height:100%;width:6rem}.listen-port-input{max-height:30px;margin:8px 0}.listen-port-p{margin:15px 11px}.header-middle{display:flex;align-items:flex-end;grid-gap:1rem;gap:1rem;height:100%}.kubernetes-services{margin-bottom:12px}",""]),e.exports=n},930:function(e,t){const r=[];e.exports=r.length<=1?r[0]:r},970:function(e,t,r){var content=r(1021);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(67).default)("5c0053d6",content,!0,{sourceMap:!1})}}]);